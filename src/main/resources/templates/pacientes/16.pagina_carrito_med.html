<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Controles</title>

  <script src="https://kit.fontawesome.com/14122cd484.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/1.estilos_pagina_inicio.css}">
  <link rel="stylesheet" th:href="@{/css/3.estilos_página_control.css}">
</head>

<body>
<header th:insert="Layouts/header_footerPaciente :: header"></header>

<main class="cuerpo_indrugs">
  <div th:insert="Layouts/header_footerPaciente :: error"></div>

  <div class="contenido">
    <h1 id="titulo_control">Medicamentos solicitados</h1>

    <div th:if="${domicilios != null and !domicilios.isEmpty()}">
      <table id="tabla1" class="table">
        <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Medicamento</th>
          <th>Cantidad</th>
          <th>Fecha de Entrega</th>
          <th>Estado</th>
          <th>Fórmula Médica</th>
          <th>EPS</th>
          <th>Placa Vehículo</th>
          <th>Dirección Entrega</th>
          <th>Teléfono</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="domicilio : ${domicilios}">
          <td th:text="${domicilio.idDomicilio}"></td>
          <td th:text="${domicilio.orden.medicamento.nombreMedicamento}"></td>
          <td th:text="${domicilio.orden.cantidad}"></td>
          <td th:text="${#temporals.format(domicilio.fechaEntregaDomicilio, 'yyyy-MM-dd HH:mm')}"></td>
          <td th:text="${domicilio.estadoDomicilio}"></td>
          <td>
            <a th:href="@{'/formularios/' + ${domicilio.formulaMedica}}" target="_blank">Ver</a>
          </td>
          <td th:text="${domicilio.epsDomicilio}"></td>
          <td th:text="${domicilio.vehiculo.placaVehiculo}"></td>
          <td th:text="${domicilio.ubicacionDomicilio}"></td>
          <td th:text="${domicilio.telefonoDomicilio}"></td>
          <td>
            <a th:href="@{/domicilios/eliminar/{id}(id=${domicilio.idDomicilio})}" class="btn btn-danger">Eliminar</a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div th:if="${controles == null or controles.isEmpty()}">
      <p>No hay medicamentos registrados.</p>
    </div>

    <a th:href="@{/pacientes/3.pagina_de_control}" class="btn btn-primary">Nuevo medicamento</a>
  </div>
</main>

<footer th:insert="Layouts/header_footerPaciente :: footer"></footer>
</body>
</html>
